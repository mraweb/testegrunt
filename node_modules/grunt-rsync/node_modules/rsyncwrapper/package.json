{
  "name": "rsyncwrapper",
  "version": "0.0.19",
  "description": "An async wrapper to the rsync command line utility for Node.js.",
  "main": "lib/rsyncwrapper",
  "repository": {
    "type": "git",
    "url": "git://github.com/jedrichards/rsyncwrapper.git"
  },
  "homepage": "https://github.com/jedrichards/rsyncwrapper",
  "bugs": {
    "url": "https://github.com/jedrichards/rsyncwrapper/issues"
  },
  "scripts": {
    "test": "grunt test"
  },
  "dependencies": {
    "lodash": "~0.9.1"
  },
  "devDependencies": {
    "grunt": "~0.4.0",
    "grunt-contrib-clean": "~0.4.0",
    "grunt-contrib-jshint": "~0.1.1",
    "vows": "~0.7.0",
    "grunt-vows": "~0.4.0",
    "grunt-shell": "~0.2.1"
  },
  "keywords": [
    "rsync",
    "command line utility wrapper",
    "async",
    "syncing",
    "copying",
    "file manipulation",
    "remote",
    "ssh"
  ],
  "author": {
    "name": "Jed Richards",
    "email": "jed@seisaku.co.uk"
  },
  "license": "MIT",
  "engines": {
    "node": ">=0.8.0"
  },
  "readme": "## rsyncwrapper\n\nAn async wrapper to the rsync command line utility for Node.js. Also available as the Grunt task [grunt-rsync](https://github.com/jedrichards/grunt-rsync).\n\n### Prerequisites\n\nA reasonably modern version of rsync (>=2.6.9) in your PATH.\n\n### Installation\n\n    $ npm install rsyncwrapper\n\n### Usage\n\n```javascript\nvar rsync = require(\"rsyncwrapper\").rsync;\nrsync(options,[callback]);\n```\n\nThe `callback` function gets four arguments `(error,stdout,stderr,cmd)`.\n\n`error`: An `Error` object if rsync failed, otherwise `null`.\n\n`stdout`: stdout from rsync.\n\n`stderr`: stderr from rsync.\n\n`cmd`: The command string that was used to invoke rsync for debugging purposes.\n\nThe `options` argument is an object literal with the following possible fields:\n\n##### `src [String|Array<String>] *required`\n\nPath(s) to file(s) or dir(s) to copy. `src` can also be an array of strings for copying multiple files. Examples, `\"./dist\"` or `[\"./dir-a/file1\",\"./dir-b/file2\"]`.\n\n##### `dest [String] *required`\n\nPath to destination. Example, `\"/var/www/mysite.tld\"`.\n\n##### `ssh [Bool]`\n\nRun rsync over ssh.  This is `false` by default.  To use this you need to have public/private key passwordless SSH access setup and working on your workstation.  If set to `true`, you should specify a hostname as part of your src or dest options.\n\n##### `port [String]`\n\nIf your ssh host uses a non standard SSH port then set it here. Example, `\"1234\"`.\n\n##### `privateKey [String]`\n\nTo specify an SSH private key other than the default for this host. Example, `\"~/.ssh/aws.pem\"`\n\n##### `recursive [Boolean]`\n\nRecurse into directories. This is `false` by default which means only files in the `src` root are copied. Equivalent to the `--recursive` rsync command line flag.\n\n##### `syncDest [Boolean]`\n\nDelete objects in `dest` that aren't present in `src`. Also deletes files that have been specifically excluded from transfer in `dest`. Take care with this option, since misconfiguration could cause data loss. Equivalent to setting both the `--delete` and `--delete-excluded` rsync command line flags.\n\n##### `syncDestIgnoreExcl [Boolean]`\n\nThe same as `syncDest`, but without the `--delete-excluded` behaviour. One use case for using this option could be while syncing a Node app to a server: you want to exclude transferring the local `node_modules` folder while retaining the remote `node_modules` folder.\n\n##### `compareMode [String] enum(\"checksum\"|\"sizeOnly\")`\n\nBy default files will be compared by modified date and file size. Set this value to `checksum` to compare by a 128bit checksum, or `sizeOnly` to compare only by file size.\n\n##### `exclude [Array<String>]`\n\nOptional array of rsync patterns to exclude from transfer.\n\n##### `include [Array<String>]`\n\nOptional array of rsync patterns to include in the transfer, if previously excluded. Exclude patterns are defined before include patterns when building the rsync command.\n\n##### `dryRun [Boolean]`\n\nBuffer verbose information to stdout about the actions rsyncwrapper would take without modifying the filesystem. Equivalent to setting both the `--dry-run` and `--verbose` rsync command line flags.\n\n#### `onStdout [Function]`\n\nOptional callback function. Called every time rsync outputs to `stdout`. Use this to print rsync output as it happens, rather than all at the end. Example: `function (data) { console.log(data) }`.\n\n#### `onStderr [Function]`\n\nOptional callback function. Called every time rsync outputs to `stderr`. Use this to print rsync error output as it happens, rather than all at the end. Example: `function (data) { console.log(data) }`.\n\n##### `args [Array<String>]`\n\nArray of additional arbitrary rsync command line options and flags.\n\nThe above options are provided for convenience and are designed to cover the most common use cases for rsync, they don't necessarily map directly to single rsync arguments with the same names. If you'd like to handcraft your rsync command then just use the `src`, `dest` and `args` options.\n\nFor extra information and subtlety relating to rsync options please consult the [rsync manpages](http://linux.die.net/man/1/rsync).\n\n### Tests\n\nBasic tests are run on [Vows Async BDD](http://vowsjs.org/) via this package's Gruntfile. To test rsyncwrapper clone the repo and ensure that the devDependancies are present. Additionally ensure that Grunt and Vows are installed globally, and then invoke:\n\n    $ npm test\n\n### Examples\n\nCopy a single file to another location. If the `dest` folder doesn't exist rsync will do a `mkdir` and create it. However it will only `mkdir` one missing directory deep (i.e. not the equivalent of `mkdir -p`).\n\n```javascript\nrsync({\n    src: \"./file.txt\",\n    dest: \"./tmp/file.txt\"\n},function (error,stdout,stderr,cmd) {\n    if ( error ) {\n        // failed\n        console.log(error.message);\n    } else {\n        // success\n    }\n});\n```\n\nCopy the contents of a directory to another folder, while excluding `txt` files. Note the trailing `/` on the `src` folder and the absence of a trailing `/` on the `dest` folder - this is the required format when copy the contents of a folder. Again rsync will only `mkdir` one level deep:\n\n```javascript\nrsync({\n    src: \"./src-folder/\",\n    dest: \"./dest-folder\",\n    recursive: true,\n    exclude: [\"*.txt\"]\n},function (error,stdout,stderr,cmd) {\n    if ( error ) {\n        // failed\n        console.log(error.message);\n    } else {\n        // success\n    }\n});\n```\n\nSyncronise the contents of a directory on a remote host with the contents of a local directory using the checksum algorithm to determine if a file needs copying:\n\n```javascript\nrsync({\n    src: \"./local-src/\",\n    dest: \"user@1.2.3.4:/var/www/remote-dest\",\n    ssh: true,\n    recursive: true,\n    syncDest: true,\n    compareMode: \"checksum\"\n},function (error,stdout,stderr,cmd) {\n    if ( error ) {\n        // failed\n        console.log(error.message);\n    } else {\n        // success\n    }\n});\n```\n\n## TODO\n\n- Add tests to cover usage of more options.\n",
  "readmeFilename": "README.md",
  "_id": "rsyncwrapper@0.0.19",
  "_shasum": "e944e21dcee42f4b564e0cccc28605e3fd349627",
  "_from": "rsyncwrapper@~0.0.11",
  "_resolved": "https://registry.npmjs.org/rsyncwrapper/-/rsyncwrapper-0.0.19.tgz"
}
